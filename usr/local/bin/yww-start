#! /usr/bin/env bash
set -euo pipefail
set -x
export TEXTDOMAIN=yww-start
export OUTPUT_CHARSET=UTF-8
source "/root/ywtray/.config/ywtray/ywtray.conf"

case "${first_run}" in
    
    false)
        
        "/root/ywtray/usr/local/bin/yww-setup"
        ;;
     
    
    true)
    
        sed -i "s/true/false/g" "/root/ywtray/.config/ywtray/ywtray.conf"
        "/root/ywtray/usr/local/bin/ywtray-settings"
        "/root/ywtray/usr/local/bin/yww-setup"
        ;;
    
    *)
        if [[ -a "/root/.config/yawtray/ywtray.conf" ]]; then
            
            printf -- "first_run=\"true\"" > "/root/ywtray/.config/ywtray/ywtray.conf"
            
        else
            
            mkdir -p "/root/.config/yawtray/ywtray.conf"
            
            printf -- "first_run=\"true\"" > "/root/ywtray/.config/ywtray/ywtray.conf"
        fi
        
        yad --splash --on-top --undecorated --no-buttons --center --timeout=3 --text="$(gettext 'Start the program again')"
        
        ;;

esac

exit 0
